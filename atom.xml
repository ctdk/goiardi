<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Goiardi]]></title>
  <link href="http://ctdk.github.io/goiardi/atom.xml" rel="self"/>
  <link href="http://ctdk.github.io/goiardi/"/>
  <updated>2014-06-19T21:27:32-07:00</updated>
  <id>http://ctdk.github.io/goiardi/</id>
  <author>
    <name><![CDATA[Jeremy Bingham]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Building Goiardi on Solaris/illumos/etc.]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/06/19/building-goiardi-on-solaris-slash-illumos-slash-etc/"/>
    <updated>2014-06-19T21:19:08-07:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/06/19/building-goiardi-on-solaris-slash-illumos-slash-etc</id>
    <content type="html"><![CDATA[<p>With the recent release of <a href="http://golang.org/doc/go1.3">Go 1.3</a>, Go now has <a href="http://golang.org/doc/go1.3#solaris">experimental support for Solaris and its various derivatives</a>. This means that goiardi will build and run on Solaris, although in an experimental way.</p>

<p>Unfortunately to get Go on Solaris/illumos/etc. you have to build it yourself from source, and at least when I was trying it out with OmniOS in vagrant it did not come with gcc by default. Getting go up so you can try out goiardi (if you don&rsquo;t want to <a href="https://github.com/ctdk/goiardi/releases/tag/v0.5.2">get the binary</a> is pretty straightforward.</p>

<ul>
<li>First, install gcc. <a href="http://omnios.omniti.com/wiki.php/DevEnv">These instructions</a> set you through installing gcc. It wasn&rsquo;t clear to me at first, but you do have to run all the <code>pkg install</code> commands mentioned. First install the appropriate version of gcc, then install those other packages.</li>
</ul>


<p>Once that&rsquo;s done, make sure your PATH is set per the instructions on that page.</p>

<ul>
<li><p>Install git with <code>pkg install developer/versioning/git</code></p></li>
<li><p>Next, download go 1.3: <code>wget http://golang.org/dl/go1.3.src.tar.gz</code> and extract it somewhere. This will be your GOROOT. Set the environment variable with <code>export GOROOT=&lt;go's location&gt;</code> (assuming you&rsquo;re using bash or similar).</p></li>
</ul>


<p>The next steps come from <a href="http://golang.org/doc/install/source">*Installing Go from source</a>:</p>

<ul>
<li><p>In this new GOROOT, <code>cd src/</code>, then run <code>./all.bash</code>. It will build go for you. If it complains about being unable to find unistd.h, you were like me and forgot the second step on that <em>Installing GCC</em> page.</p></li>
<li><p>You want to actually be able to use go, so add it to your path: <code>export PATH=$PATH:$GOROOT/bin</code>.</p></li>
<li><p>Now you need a workspace. In your home directory, run:</p></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mkdir gocode
</span><span class='line'>mkdir gocode/src
</span><span class='line'>mkdir gocode/bin
</span><span class='line'>mkdir gocode/pkg
</span><span class='line'>export GOPATH=$HOME/gocode
</span><span class='line'>export PATH=$PATH:$GOPATH/bin</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Almost there. All that&rsquo;s left is running</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>go get -t github.com/ctdk/goiardi
</span><span class='line'>go install github.com/ctdk/goiardi</span></code></pre></td></tr></table></div></figure>


<p>Assuming all went well, you can run <code>goiardi</code> at your prompt with whatever options you want, and it will happily run. After this point using goiardi is like using it on any other platform.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Goiardi Version 0.5.2 - Block of Dirt]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/06/19/goiardi-version-0-dot-5-2-block-of-dirt/"/>
    <updated>2014-06-19T12:36:31-07:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/06/19/goiardi-version-0-dot-5-2-block-of-dirt</id>
    <content type="html"><![CDATA[<p>Between the previous goiardi release and this one, my kids discovered Minecraft. This means that <em>I</em> started playing Minecraft, which ended up slowing goiardi development down for a while.</p>

<p>This blocky adversary has been overcome, however, and goiardi <a href="https://github.com/ctdk/goiardi/releases/tag/v0.5.2">version 0.5.2</a> is out.</p>

<p>Originally the next goiardi release was going to add Postgres support. This was about halfway done, and will be resumed shortly, but I decided that it was more important to add the ability to import and export data before any of the goiardi structs changed.</p>

<p>Changes in this release, from the CHANGELOG:</p>

<ul>
<li>Add import/export of goiardi data through a JSON dump.</li>
<li>Add configuration options to specify the max sizes for objects uploaded to the filestore and for JSON requests from the client.</li>
</ul>


<p>Importing and exporting is explained <a href="https://github.com/ctdk/goiardi#import-and-export-of-data">in the README</a> and in <a href="http://godoc.org/github.com/ctdk/goiardi#hdr-Import_and_Export_of_Data">the godocs</a>. Basically you add the <code>-x/--export</code> flag to your usual goiardi command to export the data to a JSON file, and run the <code>-m/--import</code> flags with your new desired goiardi set of flags to import the data. The administrator is responsible for removing any existing data (on-disk or SQL) and index files. This can help with backups or moving between the different storage engines goiardi supports, keeping data between upgrades, and should make testing easier in the future.</p>

<p>Also, per the README, there are new options to specify the maximum size of an object that can be uploaded to the filestore, and the maximum size of a JSON request from a client. The <code>-Q/--obj-max-size</code> flag gets the filestore object max size, while <code>-j/--json-req-max-size</code> sets the JSON request max size limit.</p>

<p>Completely unrelated to any of my efforts, but while I was preparing this release <a href="http://blog.golang.org/go1.3">Go 1.3 was released</a>. Goiardi and its dependencies build just fine with Go 1.3 with no changes. This also means that goiardi should be able run on some of the stranger platforms out there, like Solaris, the illumos based distributions, plan9, and apparently Dragonfly BSD. So far goiardi has only been build on OmniOS r151008j, but it built fine.</p>

<p>Finally, as an added convenience: on <a href="https://github.com/ctdk/goiardi/releases/tag/v0.5.2">the goiardi 0.5.2 release page</a>, precompiled binaries are being provided for download, if you don&rsquo;t feel like setting up go and compiling them yourself. As of this writing binaries are provided for Linux (built on Debian wheezy), MacOS X (built on 10.9 Mavericks), FreeBSD (built on FreeBSD 9.2), and illumos (built on OmniOS r151008j). The Linux, MacOS X, and FreeBSD binaries are x86_64, the illumos binary <strike>i386</strike> <strong>update:</strong> I misinterpreted the output of <code>psrinfo</code> &ndash; it was compiled for 64 bit. It appears that there&rsquo;s no reason that goiardi can&rsquo;t easily be cross compiled though, so a more sensible set of precompiled binaries will be coming soon. If you don&rsquo;t see binaries for your platform, try grabbing a binary that&rsquo;s built on a similar platform to yours, or compile it yourself.</p>

<p>Coming down the pipeline is resuming and re-merging the Postgres work, making some data structures safer for in-memory mode, some extra features for event logging and reporting, improving tests and moving away from depending on chef-pedant, and an idea I&rsquo;ve been kicking around for a serf-based pushy type thing. For those curious about the Postgres goiardi schema, you can see it <a href="https://github.com/ctdk/goiardi-schema/tree/postgres">in the &lsquo;postgres&rsquo; tree in goiardi-schema</a>. It&rsquo;s firmed up, but still subject to change before getting merged back in.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Knife Plugin for the Goiardi Event Log]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/05/28/knife-plugin-for-the-goiardi-event-log/"/>
    <updated>2014-05-28T20:16:32-07:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/05/28/knife-plugin-for-the-goiardi-event-log</id>
    <content type="html"><![CDATA[<p>There&rsquo;s now a knife plugin to use with goiardi&rsquo;s new event logging capabilities: <a href="https://github.com/ctdk/knife-goiardi-event-log">knife-goiardi-event-log 0.1.1</a>.</p>

<p>Usage info from the README:</p>

<p>There are four goiardi event log commands: <code>knife goiardi gel list</code>, <code>knife goiardi gel show</code>, <code>knife goiardi gel delete</code> and <code>knife goiardi gel purge</code>.</p>

<p><code>knife goiardi gel list</code> returns a list of logged events. A limit may be specified with <code>--limit</code>; the default limit is 15. An offset may also be specified; the default offset is 0.</p>

<p><code>knife goiardi gel show [id]</code> gives a detailed listing of a particular event log item.</p>

<p><code>knife goiardi gel delete [id]</code> deletes the given event, and prints out a detailed display of the deleted event.</p>

<p><code>knife goiardi gel purge [id]</code> purges all event log items with an id less than the given id. After purging the events, it displays the number of events that were purged.</p>

<hr />

<p>Being able to list events of a certain kind of action, type of object, time range, etc. would be nice and are on the roadmap for this plugin. Adding that capability depends on changes to goairdi before that can happen though. This plugin makes use of all the current event log functionality however.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Goiardi Version 0.5.1 - Rodan Overhead]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/05/26/goiardi-version-0-dot-5-1-rodan-overhead/"/>
    <updated>2014-05-26T11:04:04-07:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/05/26/goiardi-version-0-dot-5-1-rodan-overhead</id>
    <content type="html"><![CDATA[<p>The sky darkens. Blotting out the sun, Rodan appears to destroy beloved landmarks and stomp on small models of tanks. Goiardi <a href="https://github.com/ctdk/goiardi/releases/tag/v0.5.1">version 0.5.1</a> has been released.</p>

<p>This is an incremental release, made up of bug fixes and relatively minor new features. The most interesting new features are <a href="https://github.com/ctdk/goiardi/tree/cc9aeb1766be7515458dcc6ad6e5260201b0e837#event-logging">event logging</a> and <a href="https://github.com/ctdk/goiardi/tree/cc9aeb1766be7515458dcc6ad6e5260201b0e837#reporting">reporting</a>, although the log level changes are also nice.</p>

<p>From the CHANGELOG:</p>

<ul>
<li>Add log levels (from debug to critical). This makes -V/&mdash;verbose useful.</li>
<li>Add an easier option in the config file to specify log levels by name.</li>
<li>ipv6 already worked, but accidentally. Now it works in a more deliberate
fashion, preventing mishaps with addresses, colons, and port numbers.</li>
<li>Authentication protocol version 1.1 now supported.</li>
<li>Remove a sort on run lists that was there for some reason. I have no idea
what it was put there for, but it was wrong.</li>
<li>Add an event log to log changes to objects like nodes, clients, etc. See the
README or godocs for details.</li>
<li>Add support for reporting (<a href="http://docs.opscode.com/reporting.html"><a href="http://docs.opscode.com/reporting.html">http://docs.opscode.com/reporting.html</a></a>)</li>
</ul>


<p>This release should not break old save files, if you&rsquo;re using that. If you&rsquo;re using MySQL, you&rsquo;ll need to deploy the sqitch changes.</p>

<p>The next big things to start working on are the long promised Postgres support, and etcd/serf/consul etc. integration. Groupcache has also been asked for and looks like a worthwhile thing to pick up. As always, the <a href="https://github.com/ctdk/goiardi/issues?state=open">issues page</a> is a good place to look at what&rsquo;s being worked on.</p>

<p>Goiardi is also starting to grow beyond using chef-pedant for most of its testing; it&rsquo;s about time to start more native golang tests for goiardi and not use chef-pedant for the main tests. It should always work with chef-pedant, of course, but goiardi&rsquo;s starting to get more features that chef-pedant doesn&rsquo;t check.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Goiardi Version 0.5.0 - StÃ¼rmisch Bewegt - Now With MySQL]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/05/02/goiardi-version-0-dot-5-0-sturmisch-bewegt-now-with-mysql/"/>
    <updated>2014-05-02T10:10:55-07:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/05/02/goiardi-version-0-dot-5-0-sturmisch-bewegt-now-with-mysql</id>
    <content type="html"><![CDATA[<p>Stormily agitated, a new goiardi release appears! Goiardi <a href="https://github.com/ctdk/goiardi/releases/tag/v0.5.0">version 0.5.0</a> has been released.</p>

<p>Aside from a few bug fixes, this release brings MySQL support. Now, in addition to running entirely in memory, goiardi can use MySQL for storing data. The <a href="https://github.com/ctdk/goiardi/blob/master/README.md">README</a> and <a href="http://godoc.org/github.com/ctdk/goiardi">godocs</a> explain how to set that up.</p>

<p>From the CHANGELOG:</p>

<ul>
<li>MySQL support added</li>
<li>No longer redirect /environments/NAME/roles/NAME to /roles/NAME/environments/NAME</li>
<li>Update documentation, reformat godocs</li>
<li>Split actors apart into separate user and client types, made new Actor interface that encompasses both users and clients.</li>
</ul>


<p><strong>Note:</strong> This release contains one breaking change. Saved data files from previous goiardi releases will not work with 0.5.0, so if you&rsquo;re in that situation either don&rsquo;t upgrade or remove your saved index and data files before starting up. This will regenerate your admin, validator, and webui keys, and of course nuke anything you had in place before.</p>

<p>Postgres support has already been requested by a few people, so that should be coming fairly soon. The <a href="https://github.com/ctdk/goiardi/issues?state=open">issues page</a> has been filled in with some enhancements that would be nice for goiardi to have. Feel free to add your own if there&rsquo;s something you&rsquo;d like to see.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Goiardi Version 0.4.2 - This Is Spinal Tap]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/03/19/goiardi-version-0-dot-4-2-this-is-spinal-tap/"/>
    <updated>2014-03-19T23:04:46-07:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/03/19/goiardi-version-0-dot-4-2-this-is-spinal-tap</id>
    <content type="html"><![CDATA[<p>It seems like only yesterday that there was a goiardi release, but really it was a few days ago. <a href="https://github.com/ctdk/goiardi/releases/tag/v0.4.2">Goiardi version 0.4.2</a> is hot off the presses and ready for your perusal.</p>

<p>This is a bugfix release. The reason this is the &ldquo;Spinal Tap&rdquo; release was because I noticed these problems while I took the day off after getting a spinal tap and was bored, so it seemed fitting. The bug fixes, from the CHANGELOG, are:</p>

<ul>
<li>Perm tweak for nodes updating themselves.</li>
<li>Small change with validating role descriptions when creating or updating from JSON.</li>
<li>Fix issue with saving complicated indexed objects to disk where improperly flattened indexable objects were making the gob encoder puke all over itself when encoding the tries in the index docs.</li>
<li>Fixed a possible regression with synchronizing cookbooks that did not show up in testing, but only in real use.</li>
<li>An absolutely bonkers fix for listing cookbook files with webui. Webui wants all of the cookbook top level attributes sent over with a request to /cookbooks/&lt;name&gt;/&lt;version&gt;, but this is the exact <em>opposite</em> of the behavior chef-pedant wants, where empty definitions, attributes, etc. are not sent over. Knife also seems quite content with this, so the fix for now, since the two cases are mutually exclusionary, is to only send the empty hashes for those top level attributes with a GET if the request is coming from the webui. Bizarre, but it seems to be what&rsquo;s necessary.</li>
</ul>


<p>These were all problems that evaded notice during testing, but did pop up when I was using goiardi to set up a vagrant VM to start working on letting goiardi run a real database (optionally, of course) instead of the in-memory data store system it&rsquo;s using now. The in-memory mode is great and all for testing, and being able to freeze the data to disk for persistence is very handy, but being able to use a real database would be nice for some workloads. Supporting both the current in-memory storage and a database backend is a top priority.</p>

<p>Which database to use is still a bit up in the air, but I&rsquo;m leaning towards throwing caution to the wind and providing support for both MySQL and Postgres, with SQLite as a distinct possibility down the line. MySQL is likely to come first, but that is not set in stone.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Goiardi Version 0.4.1 Release]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/03/16/goiardi-version-0-dot-4-1-release/"/>
    <updated>2014-03-16T14:32:27-07:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/03/16/goiardi-version-0-dot-4-1-release</id>
    <content type="html"><![CDATA[<p>Hot on the heels of the 0.4.0 release comes <a href="https://github.com/ctdk/goiardi/releases/tag/v0.4.1">goiardi version 0.4.1</a>. This release adds a <tt>&mdash;disable-webui</tt> option to disable using chef-webui with goiardi, fixes a bug with parsing configuration file options and rearranges how some of the config struct items are set, fixes a typo in the sample config file, and makes some small documentation tweaks.</p>

<p>Other than that, all the changes announced in the <a href="http://ctdk.github.io/goiardi/blog/2014/03/16/version-0-dot-4-0-of-goiardi-released/">0.4.0 release announcement</a> and previous releases remain relevant.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Version 0.4.0 of Goiardi Released. Now, With Authentication!]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/03/16/version-0-dot-4-0-of-goiardi-released/"/>
    <updated>2014-03-16T10:28:50-07:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/03/16/version-0-dot-4-0-of-goiardi-released</id>
    <content type="html"><![CDATA[<p>A new version of goiardi, <a href="https://github.com/ctdk/goiardi/releases/tag/v0.4.0">version 0.4.0</a>, as been released.</p>

<p>This version fixes a bug with pessimistic matching, adds more tests, improves the documentation with an expanded <a href="https://github.com/ctdk/goiardi/blob/master/README.md">README</a> and <a href="http://godoc.org/github.com/ctdk/goiardi">more godocs</a>, and introduces client/user authentication and authorization and SSL for connections as optional settings. It will also run and authenticate properly with the chef webui, if you&rsquo;re so inclined. The webui is a separate install, however, and does not ship with goiardi.</p>

<p>There is also a <a href="https://github.com/ctdk/chef-pedant">fork of chef-pedant</a> customized for goiardi now, to handle some tests with authentication where goiardi and the chef-server make slightly different decisions.</p>

<p>Goiardi still works fine in no-auth mode. The authentication and authorization parts are completely optional, but they&rsquo;re there if you want or need authentication. It&rsquo;s recommended that if you do use authentication that you should set the <tt>&mdash;index-file</tt> and <tt>&mdash;data-file</tt> options for persistent data and index storage, but it&rsquo;s not strictly necessary. See the <a href="https://github.com/ctdk/goiardi/blob/master/README.md">README</a> for more on how to set up authentication.</p>

<p>SSL is pretty straightforward, and also explained in the README. You&rsquo;ll need to <a href="http://stackoverflow.com/questions/10175812/how-to-build-a-self-signed-certificate-with-openssl">generate a certificate/key pair</a> for it to work, but that isn&rsquo;t too hard. This does assume that you&rsquo;d use a self-signed certificate for this; if you&rsquo;re going to use a real cert I assume you know what you&rsquo;re doing (and am a little surprised, to be honest).</p>

<p>That&rsquo;s it for this release. The next major goiardi task coming up, barring any unexpected changes, is allowing it to use a database for the backend. This will be optional, of course; I plan on supporting the in-memory, no-auth mode a la chef-zero for goiardi indefinitely. Further out, there may be a smoother installation process, and someday even perhaps goiardi-specific features.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Meanwhile, in the Auth Branch...]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/03/13/meanwhile-in-the-auth-branch/"/>
    <updated>2014-03-13T10:03:30-07:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/03/13/meanwhile-in-the-auth-branch</id>
    <content type="html"><![CDATA[<p>While there is still some work remaining with finishing some needed authorization checks, I&rsquo;m happy to report that in the <a href="https://github.com/ctdk/goiardi/tree/auth">goiardi auth branch</a>, authentication for chef clients and webui is working and passing the chef-pedant tests.</p>

<p>Once those authorization issues are ironed out, I&rsquo;ll start work on updating the documentation and making a new formal release. If, in the meantime, anyone felt like testing it, it&rsquo;s pretty easy. Start goiardi with the <tt>-A</tt> or <tt>&#8211;use-auth</tt> flags, and set <tt>&#8211;conf-root</tt> to whereever you&rsquo;d like the chef-validator, chef-webui, and admin certificates to be stored. You&rsquo;d probably also want to specify index and data files for persistence, but you don&rsquo;t have to. Goiardi works with chef-webui fine as well, but at the moment you&rsquo;ll have to set a password for the admin user with knife.</p>

<p>As of this writing goiardi authentication is still a work in progress, but it&rsquo;s far enough along to start banging on to look for problems. The chef-pedant tests are pretty happy, but that doesn&rsquo;t always catch every real world issue.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Version 0.3.3 of Goiardi Released]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/02/16/version-0-dot-3-1-of-goiardi-released/"/>
    <updated>2014-02-16T11:46:49-08:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/02/16/version-0-dot-3-1-of-goiardi-released</id>
    <content type="html"><![CDATA[<p>I am pleased to announce another goiardi release.</p>

<p>This release, <a href="https://github.com/ctdk/goiardi/releases/tag/v0.3.3">version 0.3.3 of goiardi</a>, doesn&rsquo;t add much in the way of new functionality. The data store and indexer have been tweaked slightly, and go tests have been added for some of the goiardi components. The go test coverage isn&rsquo;t complete, and most goiardi testing is handled with chef-pedant, but these golang tests will be handy for testing internal functionality that could break, yet not show up in the chef-pedant testing.</p>

<p>While there isn&rsquo;t much in this release, I decided to make one here because it&rsquo;s a good place to make one before starting to tackle authentication. Enjoy.</p>

<p><strong>Update:</strong> It&rsquo;s a little embarrassing, but there was a problem merging branches, and a necessary change got backed out or overlooked, so version 0.3.1 has been superseded by version 0.3.3. On the off chance anyone got the previous version, I apologize.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Go Test Coverage Progressing]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/02/13/go-test-coverage-progressing/"/>
    <updated>2014-02-13T09:28:49-08:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/02/13/go-test-coverage-progressing</id>
    <content type="html"><![CDATA[<p>It&rsquo;s in progress, but goiardi&rsquo;s getting actual golang test coverage. It&rsquo;s being built out in the <a href="https://github.com/ctdk/goiardi/tree/test_writing">test_writing</a> branch, and so far has coverage with the crypto, data store, indexer, and utility libraries inside goiardi. Already the data store and indexer save and load functions have been reworked to make testing easier, and more tests will be coming soon.</p>

<p>Previously goiardi testing was done with chef-pedant, and that will continue to be the primary means of testing goiardi. However, there are areas where actual go tests will be useful, particularly with things like the data store and indexer that don&rsquo;t get quite as exercised by chef-pedant. My current thinking is that the go tests should focus more on internals, while chef-pedant coverage is important for testing its public behavior.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Save Persistent Store Fix]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/01/18/save-persistent-store-fix/"/>
    <updated>2014-01-18T15:10:27-08:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/01/18/save-persistent-store-fix</id>
    <content type="html"><![CDATA[<p>Pushed up a change in the latest goiardi master last night that fixes an issue with saving the persistent index and data store files where, if the temp directory was not on the same partition, renaming the file after saving would cause an error. I was clued into this by a tweet in Japanese that seemed to say something about that. Ooops.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Reindexing Search Capability Added]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/01/09/reindexing-search-capability-added/"/>
    <updated>2014-01-09T23:32:11-08:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/01/09/reindexing-search-capability-added</id>
    <content type="html"><![CDATA[<p><a href="https://github.com/ctdk/goiardi/commit/7777fd82cb767007a22253c98c02e97f2f0a5bbf">As of the most recent commit</a>, goiardi can now rebuild its search index in case it accidentally got deleted or corrupted somehow.</p>

<p>To rebuild, just run <code>knife index rebuild</code> (or <code>knife index rebuild -y</code> if you don&rsquo;t want to be bothered to press &ldquo;y&rdquo; to confirm that you really want to do it). You&rsquo;ll get a message from knife that &lsquo;knife index rebuild&rsquo; has been removed for Chef 11+ servers. This can be ignored; while goiardi identifies itself as a Chef 11+ server, this command will work because they&rsquo;ve kept it in for older versions of Chef.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Version 0.3.0 of Goiardi Released]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2014/01/06/version-0-dot-3-0-of-goiardi-released/"/>
    <updated>2014-01-06T21:09:00-08:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2014/01/06/version-0-dot-3-0-of-goiardi-released</id>
    <content type="html"><![CDATA[<p><em>Originally posted on <a href="http://time.to.pullthepl.ug/blog/2014/1/6/version-0-dot-3-0-of-goiardi-released/">time.to.pullthepl.ug</a>.</em></p>

<p>I am pleased to announce another <a href="https://github.com/ctdk/goiardi">goiardi</a> (a <a href="http://getchef.com/chef/">Chef</a> server written in go) release.</p>

<p><a href="https://github.com/ctdk/goiardi/releases/tag/v0.3.0">Version 0.3.0 of goiardi</a> adds the ability to save the in-memory data store and the search index to disk, rather than losing everything everytime the server restarts. If the options are set, goiardi will save when it receives a SIGTERM or SIGINT signal, as well as save in the background periodically. The interval defaults to five minutes, but can be specified as an option as well. In the interest of safety and data integrity, goiardi will first save to a temporary file before renaming it to the save file name.</p>

<p>Of course, goiardi will also still happily run entirely in memory as before.</p>

<p><strong>NB:</strong> Bear in mind that even if the data has been saved to disk goiardi still keeps the data store and search index in memory while it&rsquo;s running. This could cause problems if you try to shove too much data into it. I expect most use cases would have no problems (famous last words), but the appropriate caution is warranted.</p>

<p>It still does no authentication or permission checking, and while it does its best to avoid data corruption and data loss it is not a real database and should not be relied on as such. It may be useful for situations where you do not want or need a full real Chef server, but could use persistent data which you don&rsquo;t get with chef-zero.</p>

<p>Next tasks coming up: provide a way to reindex the data, improve existing docs as needed and write more, make actual go tests, fork chef-pedant and make a &ldquo;goiardi&rdquo; mode to simplify testing against chef-pedant.</p>

<p>Anyway, that&rsquo;s what this release has. Have fun with it if you&rsquo;re so inclined, and thank you if you do.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Introducing Goiardi]]></title>
    <link href="http://ctdk.github.io/goiardi/blog/2013/12/31/introducing-goiardi/"/>
    <updated>2013-12-31T12:32:00-08:00</updated>
    <id>http://ctdk.github.io/goiardi/blog/2013/12/31/introducing-goiardi</id>
    <content type="html"><![CDATA[<p><em>Originally posted on <a href="http://time.to.pullthepl.ug/blog/2013/12/31/introducing-goiardi/">time.to.pullthepl.ug</a>.</em></p>

<p>A while back, I decided that I would like to learn <a href="http://golang.org/">Go</a>, which is a pretty neat language all around (in my humble opinion). I had to come up with some sort of project that would be ambitious enough to teach myself a lot of the language features, but not so huge that I&rsquo;d give up in frustration. Then I thought of a name, and realized what I had to do.</p>

<p>After many evenings spent coding, I&rsquo;m proud to announce the first offical release of <a href="https://github.com/ctdk/goiardi">Goiardi</a>, an in-memory Chef server written in Go (the <a href="https://github.com/ctdk/goiardi/blob/master/README.md">README</a> has more information). (I started on it before I found out about Chef-Zero, but I decided to keep at it anyway. Chef-Zero was also a huge help in figuring out what the Chef server behavior ought to be.) At this time it has pretty much all the features Chef-Zero does, but sorting searches isn&rsquo;t working yet. If anyone has real examples of how those sorts are specified, I&rsquo;d love to hear them.</p>

<p>Goiardi does not support authenication or validation at all, so it isn&rsquo;t very secure. Of course, it also doesn&rsquo;t persist its contents, so you probably shouldn&rsquo;t rely on it for your infrastructure provisioning needs.</p>

<p>Aside from the authentication and permission tests, goiardi performs pretty well against chef-pedant. There are a few minor tests that fail because of slight JSON formatting differences or error messages that don&rsquo;t agree with chef-pedant, but otherwise it does quite well. Improving its performance against chef-pedant is, of course, an ongoing concern. It should do fine as a stand-in for chef-zero though, or some other situation where you need a chef server running but don&rsquo;t care if it loses all its information when it quits.</p>

<p>Goiardi is, like many Chef things, open source and licensed under version 2.0 of the Apache License.</p>

<h3>The Future</h3>

<p>Where to go from here? Goiardi certainly has a lot of room for improvement. The first things I intend to do with it are allowing you to use a config file to store options, and allowing freezing the in-memory data structures to disk so they persist when goiardi is shut down. Those aren&rsquo;t in this release because if I kept adding &ldquo;just one more thing&rdquo; before making a formal release, I&rsquo;d never actually get it out.</p>

<p>Further in the future, handling real authenication and permissions is pretty important. A real Chef Server mode, where goiardi uses Solr and a real database, is on the roadmap down the road as well. SSL, better documentation, and making the Go code more idiomatic where needed are also on the TODO list.</p>

<p>Anyway, there is is. Feel free to check it out, bang on it, see where it breaks (and where it works). Suggestions, code, and comments are always welcome. Hopefully the comments are nice, but this <em>is</em> the Internet.</p>

<p><strong>Update:</strong> At least part of the future is now. Goiardi has config file support now with 0.2.1, huzzah! This release also fixes a problem building goiardi with more recent versions of go-flags.</p>

<p>Goiardi has been tested to compile with the native go compiler and run on Mac OS X (10.7 and 10.8), Debian &lsquo;wheezy&rsquo;, and Arch Linux. It also builds and runs with gccgo (using the <code>-compiler gccgo</code> option to <code>go</code>), tested on Arch Linux. Efforts are ongoing to get it to build with gccgo without the <code>go</code> command on OmniOS, but so far they&rsquo;ve been unsuccessful.</p>

<h3>The Name</h3>

<p>If you&rsquo;re wondering about the name, <a href="http://en.wikipedia.org/wiki/Ettore_Boiardi">Ettore Boiardi</a> was the real Chef Boyardee. Wakka wakka.</p>
]]></content>
  </entry>
  
</feed>
