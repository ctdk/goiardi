
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Goiardi</title>
  <meta name="author" content="Jeremy Bingham">

  
  <meta name="description" content="While there is still some work remaining with finishing some needed authorization checks, I&rsquo;m happy to report that in the goiardi auth branch, &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ctdk.github.io/goiardi/blog/page/2">
  <link href="/goiardi/favicon.png" rel="icon">
  <link href="/goiardi/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/goiardi/atom.xml" rel="alternate" title="Goiardi" type="application/atom+xml">
  <script src="/goiardi/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/goiardi/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Istok+Web' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-6397614-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/goiardi/">Goiardi</a></h1>
  
    <h2>The one-eyed fanged yak is becoming on you.</h2>
  
  </div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/goiardi/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ctdk.github.io/goiardi" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/goiardi/">Blog</a></li>
  <li><a href="/goiardi/blog/archives">Archives</a></li>
  <li><a href="/goiardi/docs">Documentation</a></li>
  <li><a href="https://github.com/ctdk/goiardi">Source</a></li>
  <li><a href="http://time.to.pullthepl.ug">Time To Pull The Plug</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/goiardi/blog/2014/03/13/meanwhile-in-the-auth-branch/">Meanwhile, in the Auth Branch&#8230;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-13T10:03:30-07:00" pubdate data-updated="true">Mar 13<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While there is still some work remaining with finishing some needed authorization checks, I&rsquo;m happy to report that in the <a href="https://github.com/ctdk/goiardi/tree/auth">goiardi auth branch</a>, authentication for chef clients and webui is working and passing the chef-pedant tests.</p>

<p>Once those authorization issues are ironed out, I&rsquo;ll start work on updating the documentation and making a new formal release. If, in the meantime, anyone felt like testing it, it&rsquo;s pretty easy. Start goiardi with the <tt>-A</tt> or <tt>&#8211;use-auth</tt> flags, and set <tt>&#8211;conf-root</tt> to whereever you&rsquo;d like the chef-validator, chef-webui, and admin certificates to be stored. You&rsquo;d probably also want to specify index and data files for persistence, but you don&rsquo;t have to. Goiardi works with chef-webui fine as well, but at the moment you&rsquo;ll have to set a password for the admin user with knife.</p>

<p>As of this writing goiardi authentication is still a work in progress, but it&rsquo;s far enough along to start banging on to look for problems. The chef-pedant tests are pretty happy, but that doesn&rsquo;t always catch every real world issue.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/goiardi/blog/2014/02/16/version-0-dot-3-1-of-goiardi-released/">Version 0.3.3 of Goiardi Released</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-16T11:46:49-08:00" pubdate data-updated="true">Feb 16<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am pleased to announce another goiardi release.</p>

<p>This release, <a href="https://github.com/ctdk/goiardi/releases/tag/v0.3.3">version 0.3.3 of goiardi</a>, doesn&rsquo;t add much in the way of new functionality. The data store and indexer have been tweaked slightly, and go tests have been added for some of the goiardi components. The go test coverage isn&rsquo;t complete, and most goiardi testing is handled with chef-pedant, but these golang tests will be handy for testing internal functionality that could break, yet not show up in the chef-pedant testing.</p>

<p>While there isn&rsquo;t much in this release, I decided to make one here because it&rsquo;s a good place to make one before starting to tackle authentication. Enjoy.</p>

<p><strong>Update:</strong> It&rsquo;s a little embarrassing, but there was a problem merging branches, and a necessary change got backed out or overlooked, so version 0.3.1 has been superseded by version 0.3.3. On the off chance anyone got the previous version, I apologize.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/goiardi/blog/2014/02/13/go-test-coverage-progressing/">Go Test Coverage Progressing</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-13T09:28:49-08:00" pubdate data-updated="true">Feb 13<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It&rsquo;s in progress, but goiardi&rsquo;s getting actual golang test coverage. It&rsquo;s being built out in the <a href="https://github.com/ctdk/goiardi/tree/test_writing">test_writing</a> branch, and so far has coverage with the crypto, data store, indexer, and utility libraries inside goiardi. Already the data store and indexer save and load functions have been reworked to make testing easier, and more tests will be coming soon.</p>

<p>Previously goiardi testing was done with chef-pedant, and that will continue to be the primary means of testing goiardi. However, there are areas where actual go tests will be useful, particularly with things like the data store and indexer that don&rsquo;t get quite as exercised by chef-pedant. My current thinking is that the go tests should focus more on internals, while chef-pedant coverage is important for testing its public behavior.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/goiardi/blog/2014/01/18/save-persistent-store-fix/">Save Persistent Store Fix</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-18T15:10:27-08:00" pubdate data-updated="true">Jan 18<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Pushed up a change in the latest goiardi master last night that fixes an issue with saving the persistent index and data store files where, if the temp directory was not on the same partition, renaming the file after saving would cause an error. I was clued into this by a tweet in Japanese that seemed to say something about that. Ooops.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/goiardi/blog/2014/01/09/reindexing-search-capability-added/">Reindexing Search Capability Added</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-09T23:32:11-08:00" pubdate data-updated="true">Jan 9<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/ctdk/goiardi/commit/7777fd82cb767007a22253c98c02e97f2f0a5bbf">As of the most recent commit</a>, goiardi can now rebuild its search index in case it accidentally got deleted or corrupted somehow.</p>

<p>To rebuild, just run <code>knife index rebuild</code> (or <code>knife index rebuild -y</code> if you don&rsquo;t want to be bothered to press &ldquo;y&rdquo; to confirm that you really want to do it). You&rsquo;ll get a message from knife that &lsquo;knife index rebuild&rsquo; has been removed for Chef 11+ servers. This can be ignored; while goiardi identifies itself as a Chef 11+ server, this command will work because they&rsquo;ve kept it in for older versions of Chef.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/goiardi/blog/2014/01/06/version-0-dot-3-0-of-goiardi-released/">Version 0.3.0 of Goiardi Released</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-06T21:09:00-08:00" pubdate data-updated="true">Jan 6<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>Originally posted on <a href="http://time.to.pullthepl.ug/blog/2014/1/6/version-0-dot-3-0-of-goiardi-released/">time.to.pullthepl.ug</a>.</em></p>

<p>I am pleased to announce another <a href="https://github.com/ctdk/goiardi">goiardi</a> (a <a href="http://getchef.com/chef/">Chef</a> server written in go) release.</p>

<p><a href="https://github.com/ctdk/goiardi/releases/tag/v0.3.0">Version 0.3.0 of goiardi</a> adds the ability to save the in-memory data store and the search index to disk, rather than losing everything everytime the server restarts. If the options are set, goiardi will save when it receives a SIGTERM or SIGINT signal, as well as save in the background periodically. The interval defaults to five minutes, but can be specified as an option as well. In the interest of safety and data integrity, goiardi will first save to a temporary file before renaming it to the save file name.</p>

<p>Of course, goiardi will also still happily run entirely in memory as before.</p>

<p><strong>NB:</strong> Bear in mind that even if the data has been saved to disk goiardi still keeps the data store and search index in memory while it&rsquo;s running. This could cause problems if you try to shove too much data into it. I expect most use cases would have no problems (famous last words), but the appropriate caution is warranted.</p>

<p>It still does no authentication or permission checking, and while it does its best to avoid data corruption and data loss it is not a real database and should not be relied on as such. It may be useful for situations where you do not want or need a full real Chef server, but could use persistent data which you don&rsquo;t get with chef-zero.</p>

<p>Next tasks coming up: provide a way to reindex the data, improve existing docs as needed and write more, make actual go tests, fork chef-pedant and make a &ldquo;goiardi&rdquo; mode to simplify testing against chef-pedant.</p>

<p>Anyway, that&rsquo;s what this release has. Have fun with it if you&rsquo;re so inclined, and thank you if you do.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/goiardi/blog/2013/12/31/introducing-goiardi/">Introducing Goiardi</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-31T12:32:00-08:00" pubdate data-updated="true">Dec 31<span>st</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>Originally posted on <a href="http://time.to.pullthepl.ug/blog/2013/12/31/introducing-goiardi/">time.to.pullthepl.ug</a>.</em></p>

<p>A while back, I decided that I would like to learn <a href="http://golang.org/">Go</a>, which is a pretty neat language all around (in my humble opinion). I had to come up with some sort of project that would be ambitious enough to teach myself a lot of the language features, but not so huge that I&rsquo;d give up in frustration. Then I thought of a name, and realized what I had to do.</p>

<p>After many evenings spent coding, I&rsquo;m proud to announce the first offical release of <a href="https://github.com/ctdk/goiardi">Goiardi</a>, an in-memory Chef server written in Go (the <a href="https://github.com/ctdk/goiardi/blob/master/README.md">README</a> has more information). (I started on it before I found out about Chef-Zero, but I decided to keep at it anyway. Chef-Zero was also a huge help in figuring out what the Chef server behavior ought to be.) At this time it has pretty much all the features Chef-Zero does, but sorting searches isn&rsquo;t working yet. If anyone has real examples of how those sorts are specified, I&rsquo;d love to hear them.</p>

<p>Goiardi does not support authenication or validation at all, so it isn&rsquo;t very secure. Of course, it also doesn&rsquo;t persist its contents, so you probably shouldn&rsquo;t rely on it for your infrastructure provisioning needs.</p>

<p>Aside from the authentication and permission tests, goiardi performs pretty well against chef-pedant. There are a few minor tests that fail because of slight JSON formatting differences or error messages that don&rsquo;t agree with chef-pedant, but otherwise it does quite well. Improving its performance against chef-pedant is, of course, an ongoing concern. It should do fine as a stand-in for chef-zero though, or some other situation where you need a chef server running but don&rsquo;t care if it loses all its information when it quits.</p>

<p>Goiardi is, like many Chef things, open source and licensed under version 2.0 of the Apache License.</p>

<h3>The Future</h3>

<p>Where to go from here? Goiardi certainly has a lot of room for improvement. The first things I intend to do with it are allowing you to use a config file to store options, and allowing freezing the in-memory data structures to disk so they persist when goiardi is shut down. Those aren&rsquo;t in this release because if I kept adding &ldquo;just one more thing&rdquo; before making a formal release, I&rsquo;d never actually get it out.</p>

<p>Further in the future, handling real authenication and permissions is pretty important. A real Chef Server mode, where goiardi uses Solr and a real database, is on the roadmap down the road as well. SSL, better documentation, and making the Go code more idiomatic where needed are also on the TODO list.</p>

<p>Anyway, there is is. Feel free to check it out, bang on it, see where it breaks (and where it works). Suggestions, code, and comments are always welcome. Hopefully the comments are nice, but this <em>is</em> the Internet.</p>

<p><strong>Update:</strong> At least part of the future is now. Goiardi has config file support now with 0.2.1, huzzah! This release also fixes a problem building goiardi with more recent versions of go-flags.</p>

<p>Goiardi has been tested to compile with the native go compiler and run on Mac OS X (10.7 and 10.8), Debian &lsquo;wheezy&rsquo;, and Arch Linux. It also builds and runs with gccgo (using the <code>-compiler gccgo</code> option to <code>go</code>), tested on Arch Linux. Efforts are ongoing to get it to build with gccgo without the <code>go</code> command on OmniOS, but so far they&rsquo;ve been unsuccessful.</p>

<h3>The Name</h3>

<p>If you&rsquo;re wondering about the name, <a href="http://en.wikipedia.org/wiki/Ettore_Boiardi">Ettore Boiardi</a> was the real Chef Boyardee. Wakka wakka.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/goiardi/blog/archives">Blog Archives</a>
    
    <a class="next" href="/goiardi/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Goiardi</h1>
  <p><a href="https://github.com/ctdk/goiardi">Goiardi</a> is an implementation of <a href="http://www.getchef.com/chef/">the Chef server</a> written in <a href="http://golang.org">Go</a>. It can run entirely in memory (with optional persistence on disk) or can use MySQL or Postgres as a backend, is self-contained, and runs on many different platforms.</p>
</section>
<section>
  <h1>Additional Resources</h1>
   <ul>
    <li><a href="https://github.com/ctdk/goiardi-schema">goiardi-schema</a>: The SQL schema, managed with sqitch, for goiardi.</li>
    <li><a href="https://github.com/marpaia/chef-golang">chef-golang</a>: A golang chef client library.</li>
    <li><a href="https://github.com/go-chef">go-chef</a>: A number of chef libs and utilities written in Go.</li>
    <li><a href="http://docs.opscode.com/">docs.opscode.com</a>: The official Chef documentation. The chef client programs are, of course, needed to do much of anything with goiardi.</li>
    <li><a href="https://github.com/opscode/chef-zero">chef-zero</a>: Another in-memory chef server.</li>
    <li><a href="https://github.com/opscode/erchef">erchef</a>: The official Chef server, written in Erlang.</li>
    <li><a href="https://github.com/opscode/omnibus-chef-server">omnibus-chef-server</a>: Omnibus installer for erchef.</li>
    <li><a href="https://github.com/ctdk/knife-goiardi-event-log">knife-goiardi-event-log</a>: Knife plugin for the goiardi event log.</li>
    <li><a href="https://github.com/ctdk/knife-goiardi-reporting">knife-goiardi-reporting</a>: Forked knife plugin for goiardi&#8217;s reporting facilities.</li>
   </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/goiardi/blog/2014/07/21/goiardi-version-0-dot-7-0-orphans-of-the-sky/">Goiardi Version 0.7.0 - Orphans of the Sky</a>
      </li>
    
      <li class="post">
        <a href="/goiardi/blog/2014/07/01/goiardi-version-0-dot-6-0-order-of-the-elephant/">Goiardi Version 0.6.0 - Order of the Elephant</a>
      </li>
    
      <li class="post">
        <a href="/goiardi/blog/2014/06/19/building-goiardi-on-solaris-slash-illumos-slash-etc/">Building Goiardi on Solaris/illumos/etc.</a>
      </li>
    
      <li class="post">
        <a href="/goiardi/blog/2014/06/19/goiardi-version-0-dot-5-2-block-of-dirt/">Goiardi Version 0.5.2 - Block of Dirt</a>
      </li>
    
      <li class="post">
        <a href="/goiardi/blog/2014/05/28/knife-plugin-for-the-goiardi-event-log/">Knife Plugin for the Goiardi Event Log</a>
      </li>
    
  </ul>
</section>




<a class="twitter-timeline" href="https://twitter.com/goiardi" data-widget-id="421775961479057409">Tweets by @goiardi</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Jeremy Bingham -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span><br />
  <a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/us/80x15.png" /></a> Unless otherwise specified, all content on this site is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution 3.0 United States License</a>.<br />
  <a href="http://www.getchef.com">Chef</a> is &copy; 2008-2014, Chef (ne√© Opscode).
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'goiardi';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
